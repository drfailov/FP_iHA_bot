https://github.com/drfailov/FP_iHA_bot


TODO:

Вкладка для отправки сообщений боту
Очередь на отправку сообщений
Очередь на выгрузку документов
Автозагрузка
отдельный раздел с уведомлениями, для ошибок
Команда "запомни": где я пересылаю ему мем и он вносит его в базу
В базе есть вопросы типа этих https://vk.com/audio, предполагающие что пользователь отправил медиа
отправка фалов (документов) размером более 50мб
страница где можно назначить администраторов

Сейчас я пробую сделать, чтобы:
07.04.2022 работали команды впринципе
07.04.2022 Задача на сегодня: админка. Список админов, права доступа, принятие команд.
08.04.2022 И ещё одна: по приёму бот должен делать "Печатает..."
08.04.2022 Чтобы бот умел отправлять файлы
09.04.2022 переделал формат вложений - теперь у каждого вложения есть целый список загруженных в онлайн сущностей - отдельнвя для кажого бот аккаунта
09.04.2022 Команда "помощь" каскадом собирает данные
10.04.2022 команда дампа базы
10.04.2022 Чтобы базу можно было сохранить в резервную копию
10.04.2022 план на завтра - отправка файлов больше 50мб
11.04.2022 Чтобы можно было отправлять такую команду "запомни"
11.04.2022 Чтобы фотки скачивались и ложились в базу
11.04.2022 Чтобы данные вносились в базу
11.04.2022 исправлено При обучении последовательность ответа и вопроса неоднозначна
12.04.2022 Команда для просмотра диапазона ответов
12.04.2022 Команда для просмотра конкретного ответа
12.04.2022 Отправка фото с форматированием HTML
12.04.2022 Отправка документов с форматированием HTML
14.04.2022 Если возникает ошибка обработки команды, ответ из базы уже не подбирается
14.04.2022 команда для удаления ответа из базы по ID (команда "забудь")
14.04.2022 Команда для очистки неиспользуемых вложений в базе
14.04.2022 Добавлена защита от переполнения по длине вывода команды "ответы"
14.04.2022 воспринимать редактированные сообщения как новые
14.04.2022 removeAnswersFromDatabase переделана на работу с массивами для большей универсальности
14.04.2022 если в обьекте Message есть обьект ответного сообщения, он будет отправлен как ответ.



- Чтобы бот отправлял сообщения как ответы в диалоге
- обновлять количество раз сколько был использован ответ
- отправка фотографий если они были загружены на сервер
- Идентификация ответов (команда "что это?")
- скачивание стикеров как фотографий при обучении


248067313
914020479









коэффициент совпадения вопроса с вопросом из базы и его связь с удачностью этого ответа
600000 OK
533750 OK
529722 BAD
518571 ОК
516984 BAD
503333 BAD
480139 ОК



бот, стих
бот, частушки



Got response: {"ok":true,"result":[{"update_id":784436564,
    "message":{"message_id":630,"from":{"id":248067313,"is_bot":false,"first_name":"Dr","last_name":"Failov","username":"DrFailov","language_code":"ru"},"chat":{"id":248067313,"first_name":"Dr","last_name":"Failov","username":"DrFailov","type":"private"},"date":1648752657,"text":"\u0425\u0443\u0439\u043b\u043e"}}]}