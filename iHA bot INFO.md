https://github.com/drfailov/FP_iHA_bot


TODO:

Вкладка для отправки сообщений боту
Очередь на отправку сообщений
Очередь на выгрузку документов
Автозагрузка
отдельный раздел с уведомлениями, для ошибок
Команда "запомни": где я пересылаю ему мем и он вносит его в базу
В базе есть вопросы типа этих https://vk.com/audio, предполагающие что пользователь отправил медиа
отправка фалов (документов) размером более 50мб
страница где можно назначить администраторов

Сейчас я пробую сделать, чтобы:
07.04.2022 работали команды впринципе
07.04.2022 Задача на сегодня: админка. Список админов, права доступа, принятие команд.
08.04.2022 И ещё одна: по приёму бот должен делать "Печатает..."
08.04.2022 Чтобы бот умел отправлять файлы
09.04.2022 переделал формат вложений - теперь у каждого вложения есть целый список загруженных в онлайн сущностей - отдельнвя для кажого бот аккаунта
09.04.2022 Команда "помощь" каскадом собирает данные
10.04.2022 команда дампа базы
10.04.2022 Чтобы базу можно было сохранить в резервную копию
10.04.2022 план на завтра - отправка файлов больше 50мб
11.04.2022 Чтобы можно было отправлять такую команду "запомни"
11.04.2022 Чтобы фотки скачивались и ложились в базу
11.04.2022 Чтобы данные вносились в базу
11.04.2022 исправлено При обучении последовательность ответа и вопроса неоднозначна
12.04.2022 Команда для просмотра диапазона ответов
12.04.2022 Команда для просмотра конкретного ответа
12.04.2022 Отправка фото с форматированием HTML
12.04.2022 Отправка документов с форматированием HTML
14.04.2022 Если возникает ошибка обработки команды, ответ из базы уже не подбирается
14.04.2022 команда для удаления ответа из базы по ID (команда "забудь")
14.04.2022 Команда для очистки неиспользуемых вложений в базе
14.04.2022 Добавлена защита от переполнения по длине вывода команды "ответы"
14.04.2022 воспринимать редактированные сообщения как новые
14.04.2022 removeAnswersFromDatabase переделана на работу с массивами для большей универсальности
14.04.2022 если в обьекте Message есть обьект ответного сообщения, он будет отправлен как ответ.

14.04.2022 Чтобы бот отправлял сообщения как ответы в диалоге
14.04.2022 Исправлена причина по которой вылетала программа при открытии списка аккаунтов
14.04.2022 скачивание стикеров как фотографий при обучении
14.04.2022 Дополнена обработка исключений при работе с командами
16.04.2022 Резервная копия базы данных теперь включает в себя синонимы
16.04.2022 Для администраторов теперь добавлены права доступа. Они ещё не используются и не изменяются. Они просто есть.
16.04.2022 Новая команда "Ответы на". Выводит список ответов которые бот мог бы использовать при ответе на вопрос и вероятность того что ответ подходит.
16.04.2022 Бот обновляет информацию о частоте использования ответов в базе каждые 10 вопросов
16.04.2022 Исправления в команде "ответ"
17.04.2022 Добавлена защита, которая даже в случае возникновения конфликта потоком не даут угробить базу ответов при редактировании
17.04.2022 Добавлено большн защит
17.04.2022 Исправлены мелкие ошибки
17.04.2022 реализована команда загрузки файлов во временную папку
17.04.2022 чистка временных файлов теперь предполагает что там могут быть папки и сможет рекурсивно их почистить.
17.04.2022 Начато написание команды восстановления базы
17.04.2022 подстройка алгоритмов подбора ответов
18.04.2022 Переписан алгоритм подбора ответа
19.04.2022 Написана команда "восстановить базу"
19.04.2022 Начато написание команды добавления администратора
20.04.2022 Планы на добавление администратора сломаны, начинаю всё переделывать
20.04.2022 К инфе про администратора добавлена дата добавления
20.04.2022 Наброски нового плана добавления админа
21.04.2022 Начато написание механизма ведения статистики сообщений
21.04.2022 Сообщения формируют структуры данных, они сохраняются в файл и читаются оттуда.
21.04.2022 Есть команда формирования списка последних чатов для аккаунта
21.04.2022 Команда "админ добавить" теперь выводит список последних чатов
23.04.2022 Найдена и устранена ошибка, из-за которой при ошибках сначала глючил интерфейс программы, а потом она вылетала
23.04.2022 Теперь по умолчанию открывается экран с аккаунтами
23.04.2022 Созданы функции для поиска по пользователям в истории
23.04.2022 Начат тупик переосмысления работы команд
23.04.2022 Немного подвигал классы
24.04.2022 добавлена обработка команды добавления админа
24.04.2022 добавлена защита от отправки текста длиннее 4000 символов
24.04.2022 Команда "Админ"
24.04.2022 Команда "Админ добавить @drfailov"
24.04.2022 Команда "Админ @drfailov"
25.04.2022 Администрация: обжалование администратора
25.04.2022 исправлена ошибка из-за которой тригерилось "админ" на "админ добавить"
25.04.2022 Полностью переписана работа с правами доступа, теперь их список централизован
25.04.2022 Администрация: управление правами
26.04.2022 Права на управление администраторами теперь работают
26.04.2022 Теперь в списке возможных команд не будут отображаться команды которые недоступны пользователю
26.04.2022 справка по разделам не будет показывать раздел в списке, если из него не доступно ни одной команды
26.04.2022 При попытке вызова команд на добавление админа, изменение прав, удаление админа или просмотр информации теперь есть проверка есть ли достуа
27.04.2022 добавить проверки на доступ к командам для работы с базой
27.04.2022 проведены тесты на завал командами: конфликтов не выявлено.
27.04.2022 проверка во всех командах наличия права доступа на использование
27.04.2022 Написать механизм подсчёта количества команд за некоторое время от пользователя
27.04.2022 игнорировать все сообщения от собеседника, пока их количество в течении минуты превышает 15
28.04.2022 внесение информации об использовании ответов вынесело в отдельный поток и добавлена защита от запуска процесса несколько раз
28.04.2022 Команда "Ответы автор", отчёт по ответам добавленным админом
30.04.2022 добавить команду мониторинга админов, история сообщений админов 
30.04.2022 В информацию об администраторе добавлен в список команда для просмотра последних ответов в базе30.04.2022 В информацию об администраторе добавлен в список команда для просмотра последних ответов в базе
01.05.2022 вести в истории количество сообщений которые были проигнонированы с подозрением на спам
01.05.2022 вести в истории количество сообщений входящих от собеседника
01.05.2022 Теперь бот может работать в чатах по обращению
01.05.2022 Теперь бот может выводить счётчик спама и сообщений на страничке истории сообщений пользователя
01.05.2022 Теперь бот может выводить аккаунт бота в истории сообщений

04.05.2022 таймаут на отправку файла поднят до 60 секунд, таймаут на загрузку файлов уже 60 секунд
04.05.2022 выявлено, что не все FileID которые сохранены в базе пригодны для повторного использования (Bad Request: type of file mismatch)
04.05.2022 Добавлено более развернутое логгирование ошибок
04.05.2022 Реализован механизм повторной отправки фотографии в случае если при отправке по ID произошла ошибка
04.05.2022 Если FileID не отправляется, бот вносит его в список на аннулирование  и он когда-то аннулируется
04.05.2022 Оптимизация подбора ответа
04.05.2022 Добавил конманду "обучение" которая выводит инструкцию по оптимальному обучению бота
05.05.2022 Начата разработка экрана со списоком администраторов
09.05.2022 Продолжена разработка экрана со списоком администраторов
12.05.2022 В интерфейсе программы отображается список всех администраторов;
12.05.2022 Администраторов можно добавлять из списка, сформированного из истории сообщений;
12.05.2022 В списке добавления администратора не отображаются пользователи, которые уже администраторы;
12.05.2022 В интерфейсе программы можно отобрать все права у администратора;
12.05.2022 В интерфейсе программы можно удалить администратора.


- Для каждого аккаунта ввести индикатор, который бы показывал процент успешных и неуспешных запросов за последние 10 минут
- механизм отметки ответов как избранные
- Работа с вложениями типа "музыка"
- Работа с вложениями типа "видео"
- модуль истории - нужна очистка от старых данных
- Команда для вывода топа ответов самых часто используемых
- Команда "ответы с" ищет где в ответах содержится какое-то ключевое слово
- Синонимы: просмотр
- Синонимы: редактирование








F 248067313 
P 914020479 
